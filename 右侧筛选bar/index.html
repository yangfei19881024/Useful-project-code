<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
	<title>Document</title>
	<script src="libs/zepto.min.js"></script>
	<style>
		*{
			padding:0;
			margin:0;
		}
		.choice{
			font-size:20px;
			color:red;
			float:right;
		}
		.wrap{
			position: relative;
			left:0;
			right:0;
			top:0;
			bottom:0;
			background: yellow;
		}
		body{
			width:100%;
			height:100%;
			transition:transform 0.5s linear;
			-webkit-transition:-webkit-transform 0.5s linear;
		}
		body.active{
			 transform:translate3d(-80%,0,0);
			-webkit-transform:translate3d(-80%,0,0);
			z-index: 1;
		}

		.rightSide{
			position: absolute;
			top:0;
			bottom:0;
			background:red;
			display: none;
			/*width:100%;*/
		}
	</style>
</head>
<body class="hasPanel">
	<div class="wrap">
		<div class="header">
			<a href="javascript:;" class="choice">展开侧边</a>
		</div>

		<div id="wrapper">
			<div id="scroller">
				<ul>
					<li>Pretty row 1</li>
					<li>Pretty row 2</li>
					<li>Pretty row 3</li>
					<li>Pretty row 4</li>
					<li>Pretty row 5</li>
					<li>Pretty row 6</li>
					<li>Pretty row 7</li>
					<li>Pretty row 8</li>
					<li>Pretty row 9</li>
					<li>Pretty row 10</li>
					<li>Pretty row 11</li>
					<li>Pretty row 12</li>
					<li>Pretty row 13</li>
					<li>Pretty row 14</li>
					<li>Pretty row 15</li>
					<li>Pretty row 16</li>
					<li>Pretty row 17</li>
					<li>Pretty row 18</li>
					<li>Pretty row 19</li>
					<li>Pretty row 20</li>
					<li>Pretty row 21</li>
					<li>Pretty row 22</li>
					<li>Pretty row 23</li>
					<li>Pretty row 24</li>
					<li>Pretty row 25</li>
					<li>Pretty row 26</li>
					<li>Pretty row 27</li>
					<li>Pretty row 28</li>
					<li>Pretty row 29</li>
					<li>Pretty row 30</li>
					<li>Pretty row 31</li>
					<li>Pretty row 32</li>
					<li>Pretty row 33</li>
					<li>Pretty row 34</li>
					<li>Pretty row 35</li>
					<li>Pretty row 36</li>
					<li>Pretty row 37</li>
					<li>Pretty row 38</li>
					<li>Pretty row 39</li>
					<li>Pretty row 40</li>
					<li>Pretty row 41</li>
					<li>Pretty row 42</li>
					<li>Pretty row 43</li>
					<li>Pretty row 44</li>
					<li>Pretty row 45</li>
					<li>Pretty row 46</li>
					<li>Pretty row 47</li>
					<li>Pretty row 48</li>
					<li>Pretty row 49</li>
					<li>Pretty row 50</li>
				</ul>
			</div>
		</div>
	</div>

	<div class="rightSide">
		右边区域右边区域右边区域右边区域右边区域右边区域右边区域右边区域右边区域右边区域右边区域右边区域
	</div>

</body>
<!--
	要点:
	1.body 向左偏移80%的宽度
	2.右侧div的位置 应该移到body的最右边(-整个body的宽度) [用定位left或translate3d 都可以实现偏移]
	3.右侧div的宽度 应该是 body宽度的80%

	4.可以达到完美效果！！
-->
<script>
	$(function(){

		function stopScroll(e){
			e.preventDefault();
		}

		$(".choice").tap(function(){
			if( $(this).hasClass('active') ){ //右侧关闭

				$('body').removeClass('active');
				$(this).removeClass('active');
				$('.rightSide').hide();

				$('body').off('touchmove',stopScroll);


			}else{ //右侧显示

				$('body').addClass('active');
				$(this).addClass('active');
				$('.rightSide').show();

				$('body').on('touchmove',stopScroll);
			}
		});

		$(".rightSide").css({
			"transform":'translateX('+$('body').width()+'px) !important',
			"width":$('body').width()*0.8+'px'
		});
	});
</script>
</html>
